<section class="my-4">
  <div class="container">
    <!-- Filters -->
    <div class="row g-3 justify-content-center mb-4">
      <div class="col-md-3">
        <label class="form-label">City</label>
        <select class="form-select" [(ngModel)]="selectedCity">
          <option value="">All Cities</option>
          <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label">Area</label>
        <select class="form-select" [(ngModel)]="selectedArea">
          <option value="">All Areas</option>
          <option *ngFor="let area of areas" [value]="area">{{ area }}</option>
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label">Category</label>
        <select class="form-select" [(ngModel)]="selectedCategory">
          <option value="">All Categories</option>
          <option *ngFor="let cat of categories" [value]="cat.categoryId">{{ cat.name }}</option>
        </select>
      </div>

      <div class="col-md-2 d-grid align-items-end">
        <button class="btn btn-main mt-3" (click)="applyFilters()">Apply Filter</button>
      </div>
    </div>

    <!-- Search Input -->
    <input [(ngModel)]="searchText" (input)="onSearchChange()" placeholder="Search..." type="search"
      class="form-control w-75 mx-auto mb-4" />

    <!-- No Data Message -->
    <div *ngIf="noDataMessage" class="alert alert-danger mx-auto w-50 text-center" role="alert">
      No businesses match your selected filters!
    </div>

    <!-- Business Cards -->
    <div class="row">
      <div
        *ngFor="let product of Businesslist | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }; trackBy: trackById"
        class="col-md-3 col-sm-6 col-12 mb-4">
        <div class="card h-100 shadow-sm product-card">
          <!-- Cover Image -->
          <img [src]="product.imageUrls[0]" class="card-img-top object-fit-cover" alt="Product Image"
            style="height: 180px;" />

          <!-- Logo + Name -->
          <div class="bottom-widget text-center p-2">
            <div class="company-logo mb-2">
              <img [src]="product.logo" class="w-50 mx-auto rounded-circle border" />
            </div>
            <h6 class="card-title fw-bold text-truncate">{{ product.name | termtxt: 2 }}</h6>
          </div>

          <!-- Rating -->
          <div class="text-center mb-1">
            <span *ngFor="let star of [1, 2, 3, 4, 5].slice(0, product.averageRates)">
              <i class="fas fa-star rating-color"></i>
            </span>
            <span *ngIf="product.averageRates % 1 !== 0">
              <i class="fas fa-star-half-alt rating-color"></i>
            </span>
            <span class="ms-2 fw-semibold">({{ product.averageRates.toFixed(1) }} / 5)</span>
          </div>

          <!-- Actions -->
          <div class="text-center mb-3">
            <a class="btn btn-main w-75 mb-2 fw-bold" [routerLink]="['/user/offer', product.id]">
              Show Offers
            </a>

            <!-- ðŸ‘‡ Ø²Ø± Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ÙŠÙÙŠÙˆØ² -->
            <button class="btn btn-outline-primary w-75 fw-bold" [routerLink]="['/user/add-review', product.id]">
              View / Add Review
            </button>

            <i class="fa-solid fa-heart h4 mx-2 heart cursor-pointer mt-2 d-block"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="d-flex justify-content-center mt-4" *ngIf="Businesslist?.length">
      <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
    </div>
  </div>
</section>
